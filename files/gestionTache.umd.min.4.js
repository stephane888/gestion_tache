(("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]=("undefined"!==typeof self?self:this)["webpackJsonpgestionTache"]||[]).push([[4],{"08ca":function(t,e,n){"use strict";n("159f")},1267:function(t,e,n){},"159f":function(t,e,n){},"4b85":function(t,e,n){},"4bd1":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CRow",{staticClass:"ml-2  d-flex",attrs:{alignVertical:"center"}},[n("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Nouveau projet",expression:"'Nouveau projet'"}],attrs:{size:"sm",color:"warning",shape:"pill"},on:{click:t.modalAddOn}},[n("CIcon",{staticClass:"text-white",attrs:{name:"cilPlus",height:35,size:"xl"}})],1),t.showSideText?n("h6",{staticClass:"ml-1 mt-1"},[t._v("Nouveau projet")]):t._e()],1),n("CModal",{attrs:{size:"lg",title:"Nouveau projet",color:"warning",show:t.modalAdd,footer:!1},on:{"update:show":function(e){t.modalAdd=e}}},[n("PopUpContent",{ref:"child",attrs:{formValues:t.formValues,utilisateur:t.utilisateur,btnState:t.btnStateAdd},on:{"addnew-ok":t.addnewOk,"addnew-error":t.addnewError}}),n("template",{slot:"footer"},[n("div",{staticClass:"d-flex justify-content-end mr-3"},[n("CButton",{staticClass:"mx-1",attrs:{color:"light"},on:{click:function(e){t.modalAdd=!1}}},[t._v(" Cancel ")]),n("CButton",{staticClass:"mx-1 d-flex align-items-center",attrs:{color:t.btnStateAdd.state?"warning":"light"},on:{click:t.PostNewProject}},[t._v(" Save "),t.spinner?n("CSpinner",{staticClass:"mx-2",staticStyle:{width:"0.8rem",height:"0.8rem"},attrs:{tag:"div",color:"primary"}}):t._e()],1)],1)])],2)],1)},i=[],o=n("1487"),s=n.n(o),r=n("2a5d"),l={components:{PopUpContent:r["default"]},props:{showSideText:{type:Boolean,default:null}},data:function(){return{spinner:!1,postData:{starttime:"",endtime:"",title:"",text:""},btnStateAdd:{state:!1},editorData:"<p>content...</p>",selected:"projet",modalAdd:!1,editorConfig:{extraPlugins:"codesnippet",codeSnippet_theme:"monokai_sublime"},options:[{value:"projet",label:"Projet"},{value:"tache",label:"Tâche"},{value:"memos",label:"Mémos"}],formValues:{}}},mounted:function(){},computed:{utilisateur:function(){return this.$store.state.utilisateur},ser:function(){var t=document.createElement("div");return t.innerHTML=this.editorData,t.querySelectorAll("pre code").forEach((function(t){s.a.highlightBlock(t)})),t.outerHTML}},methods:{modalAddOn:function(){this.$refs.child.postData={typeIsOk:!1,type:"project",status:"0",date_depart_proposer:"",date_fin_proposer:"",date_fin_reel:"",temps_pause:"",raison:"",heure_debut:"",heure_fin:"",clientName:"",titre:"",price:"",text:"",primeStatus:null,primePrice:"",privaty:!0,executant:[]},this.modalAdd=!0,this.$refs.child.TimeNow()},PostNewProject:function(){this.spinner=!0,this.btnStateAdd.state&&this.$refs.child.PostNewProject()},addnewOk:function(t){this.spinner=!1,this.modalAdd=!1,console.log("reponse add",t),console.log("router",this),this.$router.push({name:"Projet",params:{idcontents:t.id}}),this.spinner=!1},addnewError:function(){alert("Une erreur s'est produit"),this.spinner=!1}}},c=l,u=n("2877"),d=Object(u["a"])(c,a,i,!1,null,null,null);e["a"]=d.exports},5724:function(t,e,n){"use strict";n("1267")},"7a34":function(t,e,n){"use strict";n("4b85")},c71b:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.styled?"searchForm":""},[n("multiselect",{attrs:{options:t.project,placeholder:"Tapez une recherche","hide-selected":!0,"max-height":700,"option-height":20,"show-labels":!1,searchable:!0,loading:t.isLoading,"track-by":"titre","internal-search":!1,showPointer:!0,label:"titre"},on:{"search-change":t.TypingSearch},scopedSlots:t._u([{key:"singleLabel",fn:function(e){var a=e.option;return[n("span",{staticClass:"option__desc d-inline-flex flex-column"},[n("span",{staticClass:"option__title d-none"},[t._v(t._s(a.titre))])])]}},{key:"option",fn:function(e){return[n("router-link",{attrs:{to:"/projets/"+e.option.idcontents}},[t.styled?n("div",{staticClass:"option__desc d-inline-flex flex-column align-items-start"},[n("span",{staticClass:"option__title  d-flex align-items-center"},[n("CBadge",{staticClass:"mr-2",attrs:{color:t.badgeColor(e.option.type),position:"top-start",size:"sm",shape:"pill"}},[t._v(" "+t._s(e.option.type)+" ")]),n("span",{staticClass:"titre-option"},[t._v(t._s(e.option.titre))]),n("CIcon",{staticClass:"ml-3 pb-0 ",class:"text-"+t.badgeColor(e.option.type),attrs:{name:"cilShare",size:"sm"}})],1),n("div",{staticClass:"d-flex align-items-center"})]):t._e()]),t.styled?t._e():n("div",{staticClass:"option__desc d-inline-flex flex-column align-items-start",on:{click:function(n){return t.ParentSelected(e)}}},[n("span",{staticClass:"option__title mb-2"},[n("CIcon",{staticClass:"mr-1 text-dark",attrs:{name:"cilFolder"}}),t._v(" "+t._s(e.option.titre)+" "),n("small",{staticClass:"text-dark p-1 mt-2 ml-2 text-type"},[t._v(t._s(e.option.type))])],1)])]}}]),model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}},[n("span",{staticClass:"p-3",attrs:{slot:"noResult"},slot:"noResult"},[t._v(" Ooops! Aucun élement trouvé... ")])])],1)},i=[],o=n("8e5f"),s=n.n(o),r=n("8bbf"),l=n.n(r),c=n("b8a6");l.a.component("multiselect",s.a);var u={props:{styled:{type:Boolean,default:!1}},components:{Multiselect:s.a},data:function(){return{value:"",searchValue:"",options:["list","of","options"],project:[],isLoading:!1,timer:null}},mounted:function(){},watch:{},computed:{pOptions:function(){var t=[];if(this.project.length)for(var e in this.project)t.push(this.project[e].titre);return t}},methods:{badgeColor:function(t){var e="";switch(t){case"project":e="dark";break;case"bug":e="danger";break;case"a_faire":e="dark";break;case"tache":e="success";break;case"sous-projet":e="secondary";break;default:e="light"}return e},ParentSelected:function(t){console.log("dataSelected :",t.option),this.$emit("parent-selected",t.option)},TypingSearch:function(t){if(t.length>=2){this.isLoading=!0,this.value=t;var e=this;clearTimeout(e.timer),e.timer=setTimeout((function(){e.LoadProjectData()}),1500)}},LoadProjectData:function(){var t=this;this.isLoading=!0,c["a"].post("/gestion-project/search?key="+this.value,{level:0},{headers:{Authorization:c["a"].auth}}).then((function(e){e.status&&e&&(t.project=e.data,console.log("Project search load",e)),t.isLoading=!1})).catch((function(t){console.log("error",t)}))}}},d=u,m=(n("60bc"),n("5724"),n("2877")),p=Object(m["a"])(d,a,i,!1,null,null,null);e["a"]=p.exports},d111:function(t,e,n){"use strict";var a=n("c1df"),i=n.n(a);function o(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,o=t},f:function(){try{r||null==n.return||n.return()}finally{if(l)throw o}}}}function s(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={formatData:function(t){return new Promise((function(e){console.log("fdate : ",t);var n=[];if(t&&t.titre){var a=i()(t.date_depart_proposer+" "+t.heure_debut,"YYYY-MM-DD  HH:mm").unix(),o=i()(t.date_fin_proposer+" "+t.heure_fin,"YYYY-MM-DD  HH:mm").unix(),s={table:"gestion_project_contents",fields:{text:t.text,titre:t.titre,type:t.type,privaty:t.privaty?1:0},action:"update"};if(t.idcontents&&(s.where=[{column:"idcontents",value:t.idcontents}]),t.date_depart_proposer.length&&t.date_fin_proposer.length){var r={table:"gestion_project_times",fields:{status:t.status,date_depart_proposer:a,date_fin_proposer:o},action:"update",where:[{column:"idcontents",value:t.idcontents}]};1!==parseInt(t.status)||t.date_fin_reel&&""!==t.date_fin_reel||(r.fields.date_fin_reel=i()().unix()),n.push(r)}n.push(s),console.log("ligne",n)}e(n)}))},formatHierarchie:function(t,e){return new Promise((function(n){console.log("fdate : ",e);var a=[];if(t&&t.titre){var i={table:"gestion_project_hierachie",fields:{idcontentsparent:e.id,idcontents:t.idcontents,ordre:e.ordre},action:"update",where:[{column:"idcontents",value:t.idcontents}]};a.push(i),console.log("ligne",a)}n(a)}))},formCard:function(t){var e=[];for(var n in t){var a=t[n];a.cards&&(a.cards=this.formCard(a.cards)),e.push(c(c({},a),{},{open:!1}))}return e},formatAddData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(a){var s=[],r=parseInt(t.status,10);if(n=parseInt(n,10),t.date_depart_proposer.length&&t.date_fin_proposer){var l=i()(t.date_depart_proposer+" "+t.heure_debut,"YYYY-MM-DD  HH:mm").unix(),c=i()(t.date_fin_proposer+" "+t.heure_fin,"YYYY-MM-DD  HH:mm").unix();s.push({table:"gestion_project_times",fields:{date_depart_proposer:l,date_fin_proposer:c,status:r}})}if(s.push({table:"gestion_project_hierachie",fields:{idcontentsparent:e,ordre:0,level:n}}),t.executant&&t.executant.length){var u,d=o(t.executant);try{for(d.s();!(u=d.n()).done;){var m=u.value;s.push({table:"gestion_project_executant",fields:{uid:m["uid"]}})}}catch(h){d.e(h)}finally{d.f()}}t.prime_status&&s.push({table:"gestion_project_prime",fields:{montant:t.prime_price,status:t.prime_status?1:0}});var p=[];if(t&&t.titre){var f={table:"gestion_project_contents",fields:{text:t.text,titre:t.titre,type:t.type,privaty:t.privaty?1:0},action:"insert"};f.childstable={colum_id_name:"idcontents",tables:s},p.push(f)}console.log("result ligne",p),a(p)}))},fomatVal:function(t,e,n){return new Promise((function(a){t.idcontents&&(e.idcontents=t.idcontents);var s=function(a){if(t[a])if("date_depart_proposer"===a)e[a]=i.a.unix(t[a]).format("YYYY-MM-DD"),e.heure_debut=i.a.unix(t[a]).format("HH:mm");else if("date_fin_proposer"===a)e[a]=i.a.unix(t[a]).format("YYYY-MM-DD"),e.heure_fin=i.a.unix(t[a]).format("HH:mm");else if("privaty"===a)e[a]="0"!=t[a];else if("prime_status"===a)e[a]="0"!=t[a];else if("executant"===a){e[a]=[];var s,r=o(t[a]);try{var l=function(){var t=s.value;n.forEach((function(n){t.uid==n.uid&&e[a].push(n)}))};for(r.s();!(s=r.n()).done;)l()}catch(c){r.e(c)}finally{r.f()}}else e[a]=t[a]};for(var r in e)s(r);a()}))},formatDeleteData:function(t){return new Promise((function(e){var n=[];if(t&&t.titre){var a={table:"gestion_project_contents",fields:{},action:"delete"};t.idcontents&&(a.where=[{column:"idcontents",value:t.idcontents}]),a.childstable={tables:[{table:"gestion_project_times",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_hierachie",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_executant",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_prime",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]},{table:"gestion_project_prime",fields:{},action:"delete",where:[{column:"idcontents",value:t.idcontents}]}]},n.push(a),console.log("ligne",n)}e(n)}))},formatDataClient:function(t){return new Promise((function(e){var n=[];if(t&&t.nom){var a={table:"gestion_project_client",fields:{nom:t.nom,uid:t.uid,prenom:t.prenom,phone:t.phone,adresse:t.adresse,fonction:t.fonction,idsociete:t.idsociete},action:"update"};t.idclient&&(a.where=[{column:"idclient",value:t.idclient}]),n.push(a)}e(n)}))},formatDataSte:function(t){return new Promise((function(e){var n=[];if(t&&t.nom){var a={table:"gestion_project_societe",fields:{nom:t.nom,email:t.email,phone:t.phone,adresse:t.adresse,siteweb:t.siteweb},action:"update"};t.idsociete&&(a.where=[{column:"idsociete",value:t.idsociete}]),n.push(a)}e(n)}))},formatDeleteClient:function(t){return new Promise((function(e){var n=[];if(t.idclient){var a={table:"gestion_project_client",fields:{},action:"delete",where:[{column:"idclient",value:t.idclient}]};n.push(a),console.log("ligne 1",n)}else if(t.idsociete){a={table:"gestion_project_client",fields:{},action:"delete",where:[{column:"idsociete",value:t.idsociete}]};var i={table:"gestion_project_societe",fields:{},action:"delete",where:[{column:"idsociete",value:t.idsociete}]};n.push(a),n.push(i),console.log("ligne2",n)}e(n)}))},formatAddInvoice:function(t,e){return new Promise((function(n){var a=[],o=i()().unix(),s=i()().unix();if(console.log("fadin :",t),t&&t.numero){var r={table:"gestion_project_invoice",fields:{numero:t.numero,idcontents:""!==t.idcontents?t.idcontents:null,idclients:t.idclients,objet:t.objet,creaated:o,proprietaire:t.proprietaire,updated:s}};1==e&&(r.where=[{column:"numero",value:t.numero}],r.action="update"),a.push(r)}n(a)}))},formatDeleteInvoice:function(t){return new Promise((function(e){var n=[];if(t&&t.numero){var a={table:"gestion_project_invoice",fields:{},action:"delete",where:[{column:"numero",value:t.numero}]},i={table:"gestion_project_invoice_list",fields:{},action:"delete",where:[{column:"idinvoice",value:t.numero}]};n.push(i),n.push(a)}e(n)}))},formatAddInvoiceList:function(t,e){return new Promise((function(n){var a=[];if(t&&t.titre){var i={table:"gestion_project_invoice_list",fields:{titre:t.titre,idcontents:""!==t.idcontents?t.idcontents:null,description:t.description,cout:t.cout,idinvoice:t.idinvoice}};1==e&&(i.where=[{column:"idinvoicelist",value:t.idinvoicelist}],i.action="update"),a.push(i)}n(a)}))},formatDeleteInvoiceList:function(t){return new Promise((function(e){var n=[];if(console.log("fadin :",t),t&&t.idinvoicelist){var a={table:"gestion_project_invoice_list",fields:{},action:"delete",where:[{column:"idinvoicelist",value:t.idinvoicelist}]};n.push(a)}e(n)}))}};e["a"]=d},f593:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"c-app"},[n("TheSidebar"),n("CWrapper",[n("TheHeader"),n("div",{staticClass:"c-body"},[n("main",{staticClass:"c-main"},[n("CContainer",{attrs:{fluid:""}},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view",{key:t.$route.path})],1)],1)],1)]),n("TheFooter")],1)],1)},i=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CSidebar",{attrs:{fixed:"",minimize:t.minimize,show:t.show},on:{"update:show":function(e){return t.$store.commit("set",["sidebarShow",e])}}},[n("CSidebarBrand",{staticClass:"d-md-down-none",attrs:{to:"/"}},[n("CIcon",{staticClass:"c-sidebar-brand-full",attrs:{name:"logo",size:"custom-size",height:35,viewBox:"0 0 556 134"}}),n("CIcon",{staticClass:"c-sidebar-brand-minimized",attrs:{name:"logo",size:"custom-size",height:35,viewBox:"0 0 110 134"}})],1),n("CRenderFunction",{attrs:{flat:"","content-to-render":t.$options.nav}}),n("CSidebarMinimizer",{staticClass:"d-md-down-none",nativeOn:{click:function(e){return t.$store.commit("set",["sidebarMinimize",!t.minimize])}}})],1)},s=[],r=[{_name:"CSidebarNav",_children:[{_name:"CSidebarNavItem",name:"Dashboard",to:"/dashbord",icon:"cil-speedometer"},{_name:"CSidebarNavItem",name:"Projets",to:"/projets",icon:"cil-folder"},{_name:"CSidebarNavItem",name:"Clients",to:"/clients",icon:"cil-group"},{_name:"CSidebarNavItem",name:"Factures",to:"/factures",icon:"cil-inbox"},{_name:"CSidebarNavDropdown",name:"Theme Documentation",route:"/docs",icon:"cil-star",items:[{_name:"CSidebarNavItem",name:"Documentation",to:"/docs",icon:"cil-folder"}]},{_name:"CSidebarNavDivider",_class:"m-2"},{_name:"CSidebarNavTitle",_children:["Extras"]},{_name:"CSidebarNavDropdown",name:"Pages",route:"/pages",icon:"cil-star",items:[{name:"Login",to:"/pages/login"},{name:"Register",to:"/pages/register"},{name:"Error 404",to:"/pages/404"},{name:"Error 500",to:"/pages/500"}]}]}],l={name:"TheSidebar",nav:r,computed:{show:function(){return this.$store.state.sidebarShow},minimize:function(){return this.$store.state.sidebarMinimize}}},c=l,u=n("2877"),d=Object(u["a"])(c,o,s,!1,null,null,null),m=d.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CHeader",{attrs:{fixed:"","with-subheader":"",light:""}},[n("CToggler",{staticClass:"ml-3 d-lg-none",attrs:{"in-header":""},on:{click:function(e){return t.$store.commit("toggleSidebarMobile")}}}),n("CToggler",{staticClass:"ml-3 d-md-down-none",attrs:{"in-header":""},on:{click:function(e){return t.$store.commit("toggleSidebarDesktop")}}}),n("CHeaderNav",[n("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"Afficher les dernieres taches visités.",html:!0,placement:"bottom-start"},expression:"{\n        content: 'Afficher les dernieres taches visités.',\n        html: true,\n        placement: 'bottom-start',\n      }"}],attrs:{size:"sm",variant:"ghost",color:"warning"},on:{click:function(e){t.modalLast=!t.modalLast}}},[n("CIcon",{attrs:{name:"cilEyedropper"}})],1),n("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"Afficher les taches encours.",html:!0,placement:"bottom-start"},expression:"{\n        content: 'Afficher les taches encours.',\n        html: true,\n        placement: 'bottom-start',\n      }"}],attrs:{size:"sm",variant:"ghost",color:"warning"},on:{click:t.loadTacheEncour}},[n("CIcon",{attrs:{name:"cil-settings"}})],1),n("CButton",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Mes tâches",expression:"'Mes tâches'"}],attrs:{size:"sm",shape:"",variant:"ghost",color:"primary"},on:{click:t.loadMesTaches}},[n("CIcon",{attrs:{name:"cil-address-book",size:"sm"}})],1)],1),n("CHeaderBrand",{staticClass:"mx-auto d-lg-none",attrs:{to:"/"}},[n("CIcon",{attrs:{name:"logo",height:"48",alt:"Logo"}})],1),n("CHeaderNav",{staticClass:"mr-5 d-flex align-items-center ml-sm-auto mt-1"},[t.currentUser?n("div",{staticClass:"d-flex mx-3 user-space"},[n("span",[n("CIcon",{staticClass:"mr-2 mb-1",attrs:{name:"cil-user",size:"lg"}})],1),t._v(" "),n("span",{staticClass:"logUser"},[t._v(t._s(t.currentUser))])]):t._e(),n("div",[n("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Log Out",expression:"'Log Out'"}]},[n("CButton",{attrs:{size:"",shape:"pill",color:"light"},on:{click:t.logOut}},[n("CIcon",{attrs:{name:"cil-account-logout",size:"sm"}})],1)],1)],1),n("AddNewProject")],1),n("CSubheader",{staticClass:"px-3"},[n("BreadCrumb"),n("div",{staticClass:"ml-auto d-flex flex-wrap aling-items-end"},[n("SSearch",{attrs:{styled:!0}}),n("CDropdown",{staticClass:"d-none ml-sm-n5 mt-2",attrs:{color:"dark","toggler-text":"Options"}},[n("CDropdownItem",[t._v("name")]),n("CDropdownItem",[t._v("statut")]),n("CDropdownItem",[t._v("Role")]),n("CDropdownDivider"),n("CDropdownItem",[t._v("date")])],1)],1)],1),n("CModal",{attrs:{title:"Last Updated",color:"dark",size:"lg",show:t.modalLast},on:{"update:show":function(e){t.modalLast=e}}},[n("div",{staticClass:"d-flex justify-content-end border-bottom-1 mr-3"},[n("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Actualiser",expression:"'Actualiser'"}]},[n("CButton",{attrs:{size:"sm",shape:"pill",color:"secondary"},on:{click:t.LoadTacheData}},[n("CIcon",{attrs:{name:"cil-reload",size:"sm"}})],1)],1)],1),n("CDataTable",{staticClass:"m-0 table-borderless",attrs:{hover:"",responsive:!1,items:t.itemsTache,fields:t.tableFields,header:!1,loading:t.isLoading,cleaner:"","table-filter":"","items-per-page-select":"","items-per-page":10,pagination:""},scopedSlots:t._u([{key:"user",fn:function(e){var a=e.item;return n("td",{},[n("CLink",{staticClass:"text-decoration-none",attrs:{to:{path:"/projets/"+a.idcontents}}},[n("div",{on:{click:function(e){t.modalLast=!t.modalLast}}},[t._v(" "+t._s(a.titre)+" "),"1"==a.privaty?n("CBadge",{attrs:{color:"danger",position:"top-start",shape:"pill"}},[t._v(" Privé ")]):t._e()],1),n("div",{staticClass:"small text-muted mt-1"},[n("span",[[t._v("New")],t._e()],2),t._v(" | Crée le: "+t._s(a.created_at)+" ")])])],1)}},{key:"usage",fn:function(e){var a=e.item;return n("td",{},[n("div",{staticClass:"clearfix"},[n("div",{staticClass:"float-left"}),n("div",{staticClass:"float-right"},[n("small",{staticClass:"text-bold"},[n("strong",[t._v("Updated: ")]),t._v(" "+t._s(a.update_at))])])])])}},{key:"activity",fn:function(e){var a=e.item;return n("td",{},[n("CRow",{staticClass:"ml-4 d-flex justify-content-arround flex-nowrap"},[n("CLink",{staticClass:"mx-3",attrs:{color:"primary",variant:"ghost",shape:"pill",size:"sm"}},[t._v(" "+t._s(a.type)+" ")])],1)],1)}}])}),n("template",{slot:"footer"},[n("div",{staticClass:"d-flex justify-content-end mr-3"})])],2),n("TacheEncours",{attrs:{modalLast:t.tacheEncoursModal},on:{ev_modal_last:t.ev_modal_last,"update-modal":t.UpdateModalEncour}}),n("TacheEncours",{attrs:{type:t.mesTaches,titleModal:t.titleMesTaches,colorModal:t.colorMesTaches,modalLast:t.MesTachesModal},on:{ev_modal_last:t.ev_modal_last,"update-modal":t.UpdateModal}})],1)},f=[],h=n("c71b"),v=n("4bd1"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("CBreadcrumb",{staticClass:"border-0 mb-0",attrs:{items:t.links}},[t._t("default")],2)],1)},g=[],b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ol",{staticClass:"breadcrumb",attrs:{"doc-title":t.docTitle}},[t._l(t.linkItems,(function(e,a){return n("li",{key:a,class:[e.addClasses,t.sharedClasses,t.addLinkClasses],attrs:{role:"presentation"}},[n("CLink",t._b({},"CLink",Object.assign({},e,{addClasses:null,text:null}),!1),[t._v(" "+t._s(e.text)+" ")])],1)})),t.lastItem&&t.lastItem.to.length?n("li",{class:t.lastItemClasses,attrs:{role:"presentation"}},[n("CLink",t._b({},"CLink",Object.assign({},t.lastItem,{addClasses:null,text:null}),!1),[t._v(" "+t._s(t.lastItem.text)+" ")])],1):t.lastItem?n("li",{class:t.lastItemClasses,attrs:{role:"presentation"}},[n("span",{domProps:{textContent:t._s(t.lastItem.text)}})]):t._e(),t._t("default")],2)},C=[],y=n("7559"),w={name:"CBreadcrumb",components:{CLink:y["a"]},props:{items:Array,addClasses:[String,Array,Object],addLinkClasses:[String,Array,Object],addLastItemClasses:[String,Array,Object]},data:function(){return{siteName:"Gestion des projets"}},computed:{lastItem:function(){return this.items?this.items[this.items.length-1]:null},linkItems:function(){return this.items?this.items.slice(0,-1):[]},sharedClasses:function(){return[this.addClasses,"breadcrumb-item"]},lastItemClasses:function(){return["active",this.lastItem.addClasses,this.sharedClasses,this.addLastItemClasses]},docTitle:function(){return this.lastItem?(document.title=this.lastItem.text+" | "+this.siteName,document.title):this.siteName}}},x=w,j=Object(u["a"])(x,b,C,!1,null,null,null),S=j.exports,k=n("b8a6"),L={GetCrumbs:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(a){k["a"].post("/gestion-project/select/get-crumb",t,{headers:{Authorization:k["a"].auth}}).then((function(t){t.status?(t.data.reverse(),t.data.forEach((function(t){n.push(e.formatTocrumb(t))})),console.log(" customRoute :: ",n),a(n)):a(n)}))}))},formatTocrumb:function(t){return{to:"/projets/"+t.idcontents,text:t.titre}}},T=L,I={name:"Breadcrumb",components:{CBreadcrumb:S},props:{addClasses:[String,Array,Object],addLinkClasses:[String,Array,Object],addLastItemClasses:[String,Array,Object]},data:function(){return{customRoute:[]}},computed:{items:function(){var t="";this.$route.params.idcontents&&(t="/projets");var e=this.$route.matched.filter((function(t){return t.name||t.meta&&t.meta.label}));return e.map((function(e){var n=e.meta||{};return{to:t,text:n.label||e.name}}))},props:function(){return{items:this.links,addClasses:this.addClasses,addLinkClasses:this.addLinkClasses,addLastItemClasses:this.addLastItemClasses}},links:function(){var t=[];return this.items.length&&this.items.forEach((function(e){t.push(e)})),this.customRoute.length&&this.customRoute.forEach((function(e){t.push(e)})),t}},mounted:function(){this.GetCustomRoute(this.$route)},watch:{$route:function(t){this.GetCustomRoute(t)}},methods:{GetCustomRoute:function(t){var e=this;this.customRoute=[],t.params.idcontents&&T.GetCrumbs(t.params.idcontents).then((function(t){e.customRoute=t}))}}},M=I,D=Object(u["a"])(M,_,g,!1,null,null,null),A=D.exports,O=n("f0ae"),P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CModal",{attrs:{title:t.titleModal,size:"lg",color:t.colorModal,show:t.modalLastStatus},on:{"update:show":function(e){t.modalLastStatus=e}}},[n("CRow",[n("CCol",{attrs:{col:"4"}},[n("CSelect",{attrs:{options:t.users,label:"Nom de l'utilisateur :",placeholder:"Select user tasks"},on:{change:t.LoadTacheData},model:{value:t.current_user,callback:function(e){t.current_user=e},expression:"current_user"}})],1)],1),n("CDataTable",{staticClass:"m-0 table-borderless",attrs:{hover:"",responsive:!1,items:t.itemsTache,fields:t.tableFields,header:!1,loading:t.isLoading,cleaner:"","table-filter":"","items-per-page-select":"","items-per-page":10,pagination:""},scopedSlots:t._u([{key:"user",fn:function(e){var a=e.item;return n("td",{},[n("CLink",{staticClass:"text-decoration-none",attrs:{to:{path:"/projets/"+a.idcontents}}},[n("div",{on:{click:t.evModalLast}},[t._v(" "+t._s(a.titre)+" "),"1"==a.privaty?n("CBadge",{attrs:{color:"danger",position:"top-start",shape:"pill"}},[t._v(" Privé ")]):t._e()],1),n("div",{staticClass:"small text-muted mt-1"},[t._v(" Crée le: "+t._s(a.created_at)+" ")])])],1)}},{key:"usage",fn:function(e){var a=e.item;return n("td",{attrs:{width:"300"}},[t._v(" "+t._s(t.progressItem(a))+" "),a.val&&a.max?n("CProgress",{staticClass:"progress-xs",staticStyle:{height:"10px"},attrs:{animated:"1"!==a.status&&"3"!==a.status,showPercentage:"",striped:"1"!==a.status&&"3"!==a.status,max:a.max,value:a.val,color:t.color(a.val,a.max)}}):t._e()],1)}},{key:"activity",fn:function(e){var a=e.item;return n("td",{},[n("CRow",{staticClass:"ml-4 d-flex justify-content-arround flex-nowrap"},[n("CLink",{staticClass:"mx-3",attrs:{color:"primary",variant:"ghost",shape:"pill",size:"sm"}},[t._v(" "+t._s(a.type)+" ")])],1)],1)}}])}),n("template",{slot:"footer"},[n("div",{staticClass:"d-flex justify-content-end mr-3"},[n("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:"Actualiser",expression:"'Actualiser'"}]},[n("CButton",{attrs:{size:"sm",shape:"pill",color:"secondary"},on:{click:t.LoadTacheData}},[n("CIcon",{attrs:{name:"cil-reload",size:"sm"}})],1)],1)],1)])],2)},E=[],N=n("c1df"),z=n.n(N);function $(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=B(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function B(t,e){if(t){if("string"===typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var H={name:"TacheEncours",props:{colorModal:{type:String,default:"success"},titleModal:{type:String,default:"Dernières mises à jours"},type:{type:String,default:"encour"},modalLast:{type:Boolean,required:!0,default:!1}},components:{},data:function(){return{current_user:"",isLoading:!1,itemsTache:[],tableFields:[{key:"user",_style:"min-width:550px;",filter:!1},{key:"usage",_style:"min-width:200px;"},{key:"activity",_style:"width:600px;"}],progress:{max:0,val:0},currentTime:z()().unix()}},mounted:function(){this.current_user=k["a"].current_user.toString(),this.LoadTacheData(),this.timing()},watch:{},computed:{utilisateur:function(){return this.$store.state.utilisateur},users:function(){var t=[];if(this.utilisateur&&this.utilisateur.length){var e,n=$(this.utilisateur);try{for(n.s();!(e=n.n()).done;){var a=e.value,i={};i["label"]=a["name"][0]["value"],i["mail"]=a["mail"][0]["value"],i["value"]=a["uid"][0]["value"],t.push(i)}}catch(o){n.e(o)}finally{n.f()}}return t},modalLastStatus:{get:function(){return this.modalLast},set:function(t){this.$emit("update-modal",t)}}},methods:{LoadTacheData:function(t){var e=this;switch(this.type){case"encour":this.isLoading=!0,O["a"].SelectTacheEnours().then((function(t){e.itemsTache=t,e.isLoading=!1})).catch((function(t){console.log("error encour",t),e.isLoading=!1}));break;case"mestaches":var n;if(this.isLoading=!0,this.current_user)t&&t.target?(n=t.target.value,this.current_user=n):n=this.current_user,O["a"].SelectMesTaches(n).then((function(t){e.itemsTache=t,e.isLoading=!1})).catch((function(t){console.log("error chargement mes taches",t),e.isLoading=!1}));break}},timing:function(){var t=this;this.dataLoad&&2==this.dataLoad.status?(this.currentTime=z()().unix(),setInterval((function(){t.currentTime=z()().unix()}),5e3)):this.currentTime=z()().unix()},evModalLast:function(){this.$emit("ev_modal_last")},progressItem:function(t){var e=z.a.unix(t.date_fin_proposer),n=z.a.unix(t.date_depart_proposer),a=z.a.unix(this.currentTime);t.date_fin_reel&&t.date_fin_reel>0&&(a=z.a.unix(this.dataLoad.date_fin_reel));var i=a.diff(n,"minutes"),o=e.diff(n,"minutes");t.max=o,t.val=i},color:function(t,e){return k["a"].color(t,e)}}},R=H,U=Object(u["a"])(R,P,E,!1,null,"7e3d5a40",null),F=U.exports;function V(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=G(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,r=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){r=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw o}}}}function G(t,e){if(t){if("string"===typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var q={name:"TheHeader",components:{SSearch:h["a"],AddNewProject:v["a"],BreadCrumb:A,TacheEncours:F},data:function(){return{mesTaches:"mestaches",titleMesTaches:"Mes tâches",colorMesTaches:"primary",MesTachesModal:!1,modalLast:!1,isLoading:!1,itemsTache:[],tableFields:[{key:"user",_style:"min-width:550px;",filter:!1},{key:"usage",_style:"min-width:200px;"},{key:"activity",_style:"width:600px;"}],tacheEncoursModal:!1}},mounted:function(){this.LoadTacheData()},computed:{users:function(){var t=this.$store.state.utilisateur,e=[];if(t&&t.length){var n,a=V(t);try{for(a.s();!(n=a.n()).done;){var i=n.value,o={};o["uid"]=i["uid"][0]["value"],o["name"]=i["name"][0]["value"],o["mail"]=i["mail"][0]["value"],e.push(o)}}catch(s){a.e(s)}finally{a.f()}}return e},currentUser:function(){var t=this.users,e="",n=JSON.parse(window.localStorage.getItem("current_user"));return n&&t.forEach((function(t){t.uid==n&&(e=t)})),e.name}},methods:{loadMesTaches:function(){this.MesTachesModal=!0},loadTacheEncour:function(){this.tacheEncoursModal=!0},logOut:function(){window.localStorage.clear();var t=window.location.origin+"#/pages/login";"/"!=window.location.pathname&&(t=window.location.origin+window.location.pathname+"#/pages/login"),console.log("utilisateur deconnecter",t),window.location.replace(t)},LoadTacheData:function(){var t=this;this.isLoading=!0,O["a"].selectAll().then((function(e){t.itemsTache=e,t.isLoading=!1}))},ev_modal_last:function(){this.tacheEncoursModal=!1,this.MesTachesModal=!1},UpdateModalEncour:function(t){this.tacheEncoursModal=t},UpdateModal:function(t){this.MesTachesModal=t}}},W=q,K=(n("08ca"),Object(u["a"])(W,p,f,!1,null,null,null)),Q=K.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CFooter",{attrs:{fixed:!1}},[n("div",[n("a",{attrs:{href:"https://coreui.io",target:"_blank"}},[t._v("CoreUI")]),n("span",{staticClass:"ml-1"},[t._v("© "+t._s((new Date).getFullYear())+" creativeLabs.")])]),n("div",{staticClass:"mfs-auto"},[n("span",{staticClass:"mr-1",attrs:{target:"_blank"}},[t._v("Powered by")]),n("a",{attrs:{href:"https://coreui.io/vue"}},[t._v("CoreUI for Vue")])])])},Z=[],tt={name:"TheFooter"},et=tt,nt=Object(u["a"])(et,X,Z,!1,null,null,null),at=nt.exports,it={name:"TheContainer",components:{TheSidebar:m,TheHeader:Q,TheFooter:at}},ot=it,st=(n("7a34"),Object(u["a"])(ot,a,i,!1,null,"2ef788f9",null));e["default"]=st.exports}}]);
//# sourceMappingURL=gestionTache.umd.min.4.js.map